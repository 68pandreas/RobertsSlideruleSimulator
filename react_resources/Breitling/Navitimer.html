<meta charset="UTF-8"/>

<!--
///////////////////////////////////////////////////////////////////////////////////
//                     Copyright (C) 2021 Dr Robert P. Wolf                      //
//                                                                               //
// Permission is hereby granted, free of charge, to any person obtaining a copy  //
// of this software and associated documentation files (the "Software"), to deal //
// in the Software without restriction, including without limitation the rights  //
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell     //
// copies of the Software, and to permit persons to whom the Software is         //
// furnished to do so, subject to the following conditions:                      //
//                                                                               //
// The above copyright notice and this permission notice shall be included in    //
// all copies or substantial portions of the Software.                           //
//                                                                               //
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR    //
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,      //
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE   //
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER        //
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, //
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN     //
// THE SOFTWARE.                                                                 //
///////////////////////////////////////////////////////////////////////////////////

-->

<html>


<header>
</header>

<body style="margin: 0px;">
<canvas id="Navitimer" width="1200" height="600" onmousedown="javascript: MouseDown (event);" onmouseup="javascript: MouseUp (event);" onmousemove="javascript: MouseMove (event);"/>

<script type="text/javascript">

var Makers = {
	Breitling: {
		BezelRadius: 0.48,
		NumberSize1: 0.04
	}
};

var Maker = 'Breitling';

var BreitlingLogo = new Image (); BreitlingLogo . src = 'BreitlingScaled.png';

var canvas = document . getElementById ('Navitimer');
var ctx = canvas . getContext ('2d');
var pi2 = Math . PI + Math . PI;

var degree = 0;

var point = null;
var atan = null;

var MousePoint = function (e) {
	var rect = canvas . getBoundingClientRect ();
	return {x: e . clientX - rect . left - canvas . width / 2, y: e . clientY - rect . top - canvas . height / 2};
};

var MouseDown = function (e) {
	point = MousePoint (e);
	atan = Math . atan2 (point . y, point . x);
	console . log ('MOUSE DOWN', atan);
};

var MouseUp = function (e) {
	point = null;
};

var MouseMove = function (e) {
	if (! point) return;
	var p = MousePoint (e);
	var a = Math . atan2 (p . y, p . x);
	degree += a - atan; point = p; atan = a;
};

var repaint = function () {
	canvas . width = window . innerWidth;
	canvas . height = window . innerHeight;
	var size = canvas . height;
	var BezelRadius = - Makers [Maker] . BezelRadius * size;
	var BezelDent = BezelRadius / -20;
	var NumberSize1 = Makers [Maker] . NumberSize1 * size;
	var BezelNumber = BezelRadius + NumberSize1 * 1.4;
	var BezelLeft = Math . PI / 2 - 1;
	var BezelRight = Math . PI / 2 + 1;
	ctx . save ();
	ctx . textBaseline = 'alphabetic';
	ctx . textAlign = 'center';
	ctx . font = `${NumberSize1}px arial`;
	ctx . translate (canvas . width * 0.5, canvas . height * 0.5);
	//======================
	//======================
	ctx . save ();
	ctx . rotate (degree);
	ctx . beginPath ();
	for (var ind = 0; ind < 60; ind ++) {
		ctx . arc (0, BezelRadius, BezelDent, BezelRight, BezelLeft, true);
		ctx . rotate (Math . PI / 30);
	}
	ctx . closePath ();
	ctx . moveTo (BezelRadius * -0.86, 0);
	ctx . arc (0, 0, BezelRadius * -0.86, 0, Math . PI * 2, true);
	ctx . stroke (); ctx . fillStyle = 'blue'; ctx . fill ();
	ctx . restore ();
	//======================
	ctx . save();
	var position = Math . log10 (6);
	ctx . rotate (- pi2 * position + degree);
	ctx . fillStyle = 'red'; ctx . fillText ('10', 0, BezelNumber); ctx . fillStyle = 'white';
	var next = Math . log10 (1.1); ctx . rotate (pi2 * next); ctx . fillText ('11', 0, BezelNumber); position = next;
	next = Math . log10 (1.2); ctx . rotate (pi2 * (next - position)); ctx . fillText ('12', 0, BezelNumber); position = next;
	next = Math . log10 (1.3); ctx . rotate (pi2 * (next - position)); ctx . fillText ('13', 0, BezelNumber); position = next;
	next = Math . log10 (1.4); ctx . rotate (pi2 * (next - position)); ctx . fillText ('14', 0, BezelNumber); position = next;
	next = Math . log10 (1.5); ctx . rotate (pi2 * (next - position)); ctx . fillText ('15', 0, BezelNumber); position = next;
	next = Math . log10 (1.6); ctx . rotate (pi2 * (next - position)); ctx . fillText ('16', 0, BezelNumber); position = next;
	next = Math . log10 (1.7); ctx . rotate (pi2 * (next - position)); ctx . fillText ('17', 0, BezelNumber); position = next;
	next = Math . log10 (1.8); ctx . rotate (pi2 * (next - position)); ctx . fillText ('18', 0, BezelNumber); position = next;
	next = Math . log10 (1.9); ctx . rotate (pi2 * (next - position)); ctx . fillText ('19', 0, BezelNumber); position = next;
	next = Math . log10 (2); ctx . rotate (pi2 * (next - position)); ctx . fillText ('20', 0, BezelNumber); position = next;
	next = Math . log10 (2.1); ctx . rotate (pi2 * (next - position)); ctx . fillText ('21', 0, BezelNumber); position = next;
	next = Math . log10 (2.2); ctx . rotate (pi2 * (next - position)); ctx . fillText ('22', 0, BezelNumber); position = next;
	next = Math . log10 (2.3); ctx . rotate (pi2 * (next - position)); ctx . fillText ('23', 0, BezelNumber); position = next;
	next = Math . log10 (2.4); ctx . rotate (pi2 * (next - position)); ctx . fillText ('24', 0, BezelNumber); position = next;
	next = Math . log10 (2.5); ctx . rotate (pi2 * (next - position)); ctx . fillText ('25', 0, BezelNumber); position = next;
	next = Math . log10 (3); ctx . rotate (pi2 * (next - position)); ctx . fillText ('30', 0, BezelNumber); position = next;
	next = Math . log10 (4); ctx . rotate (pi2 * (next - position)); ctx . fillText ('40', 0, BezelNumber); position = next;
	next = Math . log10 (5); ctx . rotate (pi2 * (next - position)); ctx . fillText ('50', 0, BezelNumber); position = next;
	next = Math . log10 (6); ctx . rotate (pi2 * (next - position)); ctx . fillStyle = 'red'; ctx . fillText ('60', 0, BezelNumber); position = next;
	next = Math . log10 (7); ctx . rotate (pi2 * (next - position)); ctx . fillStyle = 'white'; ctx . fillText ('70', 0, BezelNumber); position = next;
	next = Math . log10 (8); ctx . rotate (pi2 * (next - position)); ctx . fillText ('80', 0, BezelNumber); position = next;
	next = Math . log10 (9); ctx . rotate (pi2 * (next - position)); ctx . fillText ('90', 0, BezelNumber); position = next;
	ctx . restore ();
	//======================
	ctx . save ();
	// ctx . rotate (degree * Math . PI / 48);
	// ctx . rotate (degree);
	ctx . translate (BreitlingLogo . width * -0.5, BreitlingLogo . height * -0.5);
	ctx . drawImage (BreitlingLogo, 0, 0);
	ctx . restore ();
	//======================
	ctx . restore ();
	// degree += 1;
	if (degree > 96) degree = 0;
};

setInterval (repaint, 250);

</script>


</body>

</html>
